From b0dc939cdce244116ed04d89d50c2a590e57ee1f Mon Sep 17 00:00:00 2001
From: Alistair Francis <alistair@alistair23.me>
Date: Sun, 27 Jan 2019 17:43:36 -0800
Subject: [PATCH] Revert newer gpsd gps_read() arguments

Signed-off-by: Alistair Francis <alistair@alistair23.me>
---
 src/drive.c              | 4 ++--
 src/track/record-track.c | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/drive.c b/src/drive.c
index 95daa45..a255ba4 100644
--- a/src/drive.c
+++ b/src/drive.c
@@ -112,7 +112,7 @@ gboolean map_drive_loop(gpointer user_data)
 	}
 
 	if (gps_waiting(&gps_data, 500)) {
-		ret = gps_read(&gps_data, NULL, 0);
+		ret = gps_read(&gps_data);
 
 		if (ret < 0) {
 			fprintf(stderr, "gps_read error: %d\n", ret);
@@ -199,7 +199,7 @@ gpointer prepare_to_drive(gpointer user_data)
 	/* Poll until we hit the start line */
 	while (cur_track && !data->finished_drive) {
 		if (gps_waiting(&gps_data, 500)) {
-			ret = gps_read(&gps_data, NULL, 0);
+			ret = gps_read(&gps_data);
 
 			if (ret < 0) {
 				fprintf(stderr, "gps_read error: %d\n", ret);
diff --git a/src/track/record-track.c b/src/track/record-track.c
index 6ec7fee..fcc672b 100644
--- a/src/track/record-track.c
+++ b/src/track/record-track.c
@@ -210,7 +210,7 @@ gpointer record_track(gpointer user_data)
 	/* Read data and write to file until user interrupts us */
 	while (data->record_page) {
 		if (gps_waiting(&gps_data, 500)) {
-			ret = gps_read(&gps_data, NULL, 0);
+			ret = gps_read(&gps_data);
 
 			if (ret < 0) {
 				fprintf(stderr, "gps_read error: %d\n", ret);
-- 
2.17.1

